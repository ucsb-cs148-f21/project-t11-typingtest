{"ast":null,"code":"import _objectSpread from\"C:/Users/jason/Desktop/project-t11-typingtest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/Users/jason/Desktop/project-t11-typingtest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"C:/Users/jason/Desktop/project-t11-typingtest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{BrowserRouter,Route,Switch}from\"react-router-dom\";import CheckingSignedIn from\"./pages/CheckingSignedIn\";import Home from\"./pages/Home\";import Profile from\"./pages/Profile\";import Private from\"./pages/Private\";import Practice from\"./pages/Practice\";import PageNotFound from\"./pages/PageNotFound\";import ArticleList from\"./components/ArticleList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),isSignedIn=_useState2[0],setIsSignedIn=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),articles=_useState4[0],setArticles=_useState4[1];var script=document.createElement(\"script\");script.src=\"https://apis.google.com/js/platform.js\";script.onload=function(){return initGoogleSignIn();};document.body.appendChild(script);function initGoogleSignIn(){window.gapi.load(\"auth2\",function(){window.gapi.auth2.init({client_id:process.env.REACT_APP_AUTH_CLIENT_ID}).then(function(){var authInstance=window.gapi.auth2.getAuthInstance();var isSignedIn=authInstance.isSignedIn.get();setIsSignedIn(isSignedIn);authInstance.isSignedIn.listen(function(isSignedIn){setIsSignedIn(isSignedIn);});});});window.gapi.load(\"signin2\",function(){window.gapi.signin2.render(\"login-button\",{theme:\"dark\"});});}useEffect(function(){fetch('http://localhost:3000/articles',{'methods':'GET',headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(response){return setArticles(response);}).catch(function(error){return console.log(error);});},[]);function PrivateRoute(props){var component=props.component,rest=_objectWithoutProperties(props,[\"component\"]);return/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{component:isSignedIn?component:Private}));}if(isSignedIn!==null){return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Home}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/profile\",component:Profile}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/practice\",component:Practice}),/*#__PURE__*/_jsx(Route,{path:\"/\",component:PageNotFound})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"App container m-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Connecting a React Frontend to a Flask Backend.\"})})}),/*#__PURE__*/_jsx(ArticleList,{articles:articles})]})]});}return/*#__PURE__*/_jsx(CheckingSignedIn,{});}","map":{"version":3,"sources":["C:/Users/jason/Desktop/project-t11-typingtest/src/App.js"],"names":["React","useState","useEffect","BrowserRouter","Route","Switch","CheckingSignedIn","Home","Profile","Private","Practice","PageNotFound","ArticleList","App","isSignedIn","setIsSignedIn","articles","setArticles","script","document","createElement","src","onload","initGoogleSignIn","body","appendChild","window","gapi","load","auth2","init","client_id","process","env","REACT_APP_AUTH_CLIENT_ID","then","authInstance","getAuthInstance","get","listen","signin2","render","theme","fetch","headers","response","json","catch","error","console","log","PrivateRoute","props","component","rest"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\n\r\nimport CheckingSignedIn from \"./pages/CheckingSignedIn\";\r\nimport Home from \"./pages/Home\";\r\nimport Profile from \"./pages/Profile\";\r\nimport Private from \"./pages/Private\";\r\nimport Practice from \"./pages/Practice\";\r\nimport PageNotFound from \"./pages/PageNotFound\";\r\nimport ArticleList from \"./components/ArticleList\";\r\n\r\nexport default function App() {\r\n  const [isSignedIn, setIsSignedIn] = useState(null);\r\n  const [articles, setArticles] = useState([]);\r\n  const script = document.createElement(\"script\");\r\n  script.src = \"https://apis.google.com/js/platform.js\";\r\n  script.onload = () => initGoogleSignIn();\r\n  document.body.appendChild(script);\r\n\r\n  function initGoogleSignIn() {\r\n    window.gapi.load(\"auth2\", () => {\r\n      window.gapi.auth2\r\n        .init({\r\n          client_id: process.env.REACT_APP_AUTH_CLIENT_ID,\r\n        })\r\n        .then(() => {\r\n          const authInstance = window.gapi.auth2.getAuthInstance();\r\n          const isSignedIn = authInstance.isSignedIn.get();\r\n          setIsSignedIn(isSignedIn);\r\n\r\n          authInstance.isSignedIn.listen((isSignedIn) => {\r\n            setIsSignedIn(isSignedIn);\r\n          });\r\n        });\r\n    });\r\n    window.gapi.load(\"signin2\", () => {\r\n      window.gapi.signin2.render(\"login-button\", {\r\n        theme: \"dark\",\r\n      });\r\n    });\r\n  }\r\n  useEffect(()=>{\r\n    fetch('http://localhost:3000/articles',{\r\n      'methods':'GET',\r\n      headers : {\r\n        'Content-Type':'application/json'\r\n      }\r\n    })\r\n    .then(response => response.json())\r\n    .then(response => setArticles(response))\r\n    .catch(error => console.log(error))\r\n  },[])\r\n\r\n  function PrivateRoute(props) {\r\n    const { component, ...rest } = props;\r\n    return <Route {...rest} component={isSignedIn ? component : Private} />;\r\n  }\r\n\r\n  if (isSignedIn !== null) {\r\n    return (\r\n      <BrowserRouter>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Home} />\r\n          <PrivateRoute exact path=\"/profile\" component={Profile} />\r\n          <Route exact path=\"/practice\" component={Practice} />\r\n          <Route path=\"/\" component={PageNotFound} />\r\n        </Switch>\r\n        <div className=\"App container m-4\">\r\n          <div className=\"row\">\r\n            <div className=\"text-center\">\r\n            <h1>Connecting a React Frontend to a Flask Backend.</h1>\r\n            </div>\r\n          </div>\r\n      \r\n            <ArticleList \r\n            articles={articles} \r\n            />\r\n      \r\n          </div>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n\r\n  return <CheckingSignedIn />;\r\n}"]},"metadata":{},"sourceType":"module"}